<!DOCTYPE html>
<html lang="id">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Checkout - CryptoShop</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.3/font/bootstrap-icons.css"
    />
    <link href="css/style.css" rel="stylesheet" />
  </head>
  <body>
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
      <div class="container">
        <a class="navbar-brand" href="index.html">
          <i class="bi bi-shield-lock"></i> CryptoShop
        </a>
      </div>
    </nav>

    <main class="container my-5">
      <div class="row">
        <div class="col">
          <h1 class="mb-4">
            <i class="bi bi-credit-card"></i> Checkout & Enkripsi Pembayaran
          </h1>
          <p class="text-muted">Simulasi enkripsi data transaksi e-commerce</p>
        </div>
      </div>

      <div class="row">
        <div class="col-md-4">
          <div class="card">
            <div class="card-header">
              <h5 class="mb-0">Ringkasan Pesanan</h5>
            </div>
            <div class="card-body">
              <div id="order-summary">
                <p class="text-center">Memuat data pesanan...</p>
              </div>
            </div>
          </div>

          <div class="card mt-3">
            <div class="card-header bg-dark text-white">
              <h5 class="mb-0">
                <i class="bi bi-lock"></i> Pilih Algoritma Enkripsi
              </h5>
            </div>
            <div class="card-body">
              <div class="form-check mb-3">
                <input
                  class="form-check-input"
                  type="radio"
                  name="algorithm"
                  id="aes"
                  value="aes"
                  checked
                />
                <label class="form-check-label" for="aes">
                  <span class="badge bg-warning">AES-256-CBC</span>
                  <small class="d-block text-muted"
                    >Block cipher, mode CBC, IV 16-byte</small
                  >
                </label>
              </div>
              <div class="form-check">
                <input
                  class="form-check-input"
                  type="radio"
                  name="algorithm"
                  id="chacha"
                  value="chacha"
                />
                <label class="form-check-label" for="chacha">
                  <span class="badge bg-info">ChaCha20-Poly1305</span>
                  <small class="d-block text-muted"
                    >Stream cipher, AEAD, nonce 12-byte</small
                  >
                </label>
              </div>
            </div>
          </div>
        </div>

        <div class="col-md-8">
          <div class="card">
            <div class="card-header">
              <h5 class="mb-0">Informasi Pembayaran</h5>
            </div>
            <div class="card-body">
              <form id="payment-form">
                <div class="mb-3">
                  <label for="card-number" class="form-label">
                    <i class="bi bi-credit-card"></i> Nomor Kartu
                  </label>
                  <input
                    type="text"
                    class="form-control"
                    id="card-number"
                    placeholder="4111 1111 1111 1111"
                    required
                    pattern="[0-9\s]{13,19}"
                    maxlength="19"
                  />
                  <div class="form-text">
                    Contoh: 4111111111111111 (dummy data)
                  </div>
                </div>

                <div class="row">
                  <div class="col-md-6">
                    <div class="mb-3">
                      <label for="expiry-date" class="form-label">
                        <i class="bi bi-calendar"></i> Masa Berlaku
                      </label>
                      <input
                        type="text"
                        class="form-control"
                        id="expiry-date"
                        placeholder="MM/YY"
                        required
                        pattern="\d{2}/\d{2}"
                      />
                    </div>
                  </div>
                  <div class="col-md-6">
                    <div class="mb-3">
                      <label for="cvv" class="form-label">
                        <i class="bi bi-shield"></i> CVV
                      </label>
                      <input
                        type="text"
                        class="form-control"
                        id="cvv"
                        placeholder="123"
                        required
                        pattern="\d{3}"
                      />
                    </div>
                  </div>
                </div>

                <div class="mb-3">
                  <label for="email" class="form-label">
                    <i class="bi bi-envelope"></i> Email
                  </label>
                  <input
                    type="email"
                    class="form-control"
                    id="email"
                    placeholder="customer@example.com"
                    required
                  />
                </div>

                <div class="alert alert-warning">
                  <i class="bi bi-exclamation-triangle"></i>
                  <strong>Perhatian:</strong> Ini hanya simulasi. Data yang
                  dimasukkan adalah dummy. Enkripsi dilakukan di backend untuk
                  studi kriptografi.
                </div>

                <div class="d-grid gap-2">
                  <button type="submit" class="btn btn-primary btn-lg">
                    <i class="bi bi-lock"></i> Enkripsi & Proses Pembayaran
                  </button>
                  <button type="button" id="compare-btn" class="btn btn-info">
                    <i class="bi bi-graph-up"></i> Bandingkan Kedua Algoritma
                  </button>
                </div>
              </form>
            </div>
          </div>

          <div class="card mt-3" id="results-card" style="display: none">
            <div class="card-header">
              <h5 class="mb-0">
                <i class="bi bi-file-lock"></i> Hasil Enkripsi
              </h5>
            </div>
            <div class="card-body">
              <div class="mb-3">
                <h6>
                  Algoritma: <span id="algorithm-name" class="badge"></span>
                </h6>
              </div>

              <div class="mb-3">
                <label class="form-label"
                  >Data Sebelum Enkripsi (Plaintext):</label
                >
                <pre class="bg-light p-3 rounded" id="plaintext-data"></pre>
              </div>

              <div class="mb-3">
                <label class="form-label"
                  >Data Setelah Enkripsi (Ciphertext):</label
                >
                <pre
                  class="bg-dark text-white p-3 rounded"
                  id="ciphertext-data"
                ></pre>
              </div>

              <div class="row">
                <div class="col-md-6">
                  <div class="mb-3">
                    <label class="form-label">
                      <span id="iv-label">IV / Nonce:</span>
                    </label>
                    <code
                      class="d-block bg-light p-2 rounded"
                      id="iv-nonce"
                    ></code>
                  </div>
                </div>
                <div class="col-md-6" id="tag-container" style="display: none">
                  <div class="mb-3">
                    <label class="form-label">Authentication Tag:</label>
                    <code
                      class="d-block bg-light p-2 rounded"
                      id="tag-data"
                    ></code>
                  </div>
                </div>
              </div>

              <div
                class="alert alert-success"
                id="success-message"
                style="display: none"
              >
                <i class="bi bi-check-circle"></i>
                <strong>Sukses!</strong> Data berhasil dienkripsi dan
                didekripsi.
              </div>

              <div class="d-grid gap-2">
                <button type="button" id="decrypt-btn" class="btn btn-success">
                  <i class="bi bi-unlock"></i> Coba Dekripsi
                </button>
                <button
                  type="button"
                  id="view-analysis-btn"
                  class="btn btn-outline-primary"
                >
                  <i class="bi bi-graph-up"></i> Lihat Analisis Lengkap
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </main>

    <div
      class="modal fade"
      id="decryptionModal"
      tabindex="-1"
      aria-hidden="true"
    >
      <div class="modal-dialog modal-dialog-centered modal-lg">
        <div class="modal-content">
          <div class="modal-header bg-success text-white">
            <h5 class="modal-title">
              <i class="bi bi-unlock-fill"></i> Dekripsi Berhasil
            </h5>
            <button
              type="button"
              class="btn-close btn-close-white"
              data-bs-dismiss="modal"
              aria-label="Close"
            ></button>
          </div>
          <div class="modal-body">
            <div class="alert alert-success mb-3">
              <i class="bi bi-check-circle-fill"></i> Data ciphertext berhasil
              didekripsi kembali ke format aslinya.
            </div>
            <label class="fw-bold mb-2">Data Asli (Plaintext):</label>
            <div class="position-relative">
              <pre
                class="bg-light border rounded p-3 text-dark"
                id="decrypted-content"
                style="max-height: 400px; overflow-y: auto; font-size: 0.9rem"
              ></pre>
            </div>
          </div>
          <div class="modal-footer">
            <button
              type="button"
              class="btn btn-secondary"
              data-bs-dismiss="modal"
            >
              Tutup
            </button>
          </div>
        </div>
      </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
    <script src="js/crypto.js"></script>
  </body>
</html>
